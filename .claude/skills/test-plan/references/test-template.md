# 테스트 계획서 전체 템플릿

## 1. 개요

### 1.1 목적
- 소프트웨어 품질 보증
- 요구사항 충족 검증
- 결함 조기 발견

### 1.2 범위
- 테스트 대상: [기능 목록]
- 제외 항목: [제외 사유]

### 1.3 테스트 환경
| 환경 | 용도 | URL |
|------|------|-----|
| Development | 개발 테스트 | localhost:8081 |
| Staging | 통합 테스트 | staging.example.com |
| Production | 최종 검증 | example.com |

---

## 2. 유닛 테스트 계획

### 2.1 유틸리티 함수

#### formatDate
| 케이스 | 입력 | 예상 출력 | 우선순위 |
|--------|------|----------|----------|
| 정상 | '2024-01-15' | '2024년 1월 15일' | High |
| null 입력 | null | '' | High |
| 잘못된 형식 | 'invalid' | '' | Medium |

#### formatPrice
| 케이스 | 입력 | 예상 출력 | 우선순위 |
|--------|------|----------|----------|
| 정상 | 10000 | '10,000원' | High |
| 0 | 0 | '0원' | High |
| 음수 | -1000 | '-1,000원' | Medium |

### 2.2 커스텀 훅

#### useAuth
| 케이스 | 상태 | 예상 동작 | 우선순위 |
|--------|------|----------|----------|
| 로그인 상태 | 토큰 있음 | user 객체 반환 | High |
| 로그아웃 상태 | 토큰 없음 | null 반환 | High |
| 토큰 만료 | 만료된 토큰 | 자동 갱신 시도 | High |

---

## 3. 통합 테스트 계획

### 3.1 인증 API

#### POST /auth/register
| 케이스 | 요청 | 예상 응답 | 상태 코드 |
|--------|------|----------|----------|
| 성공 | 유효한 데이터 | user + token | 201 |
| 이메일 중복 | 기존 이메일 | 에러 | 400 |
| 이메일 형식 오류 | invalid-email | 에러 | 400 |
| 비밀번호 짧음 | 7자 미만 | 에러 | 400 |

#### POST /auth/login
| 케이스 | 요청 | 예상 응답 | 상태 코드 |
|--------|------|----------|----------|
| 성공 | 올바른 자격증명 | user + token | 200 |
| 이메일 없음 | 미등록 이메일 | 에러 | 401 |
| 비밀번호 틀림 | 잘못된 비밀번호 | 에러 | 401 |

### 3.2 예약 API

#### POST /reservations
| 케이스 | 요청 | 예상 응답 | 상태 코드 |
|--------|------|----------|----------|
| 성공 | 유효한 예약 | reservation | 201 |
| 재고 부족 | 수량 > 재고 | 에러 | 400 |
| 인증 없음 | 토큰 없음 | 에러 | 401 |

---

## 4. E2E 테스트 계획

### 4.1 회원가입 → 로그인 플로우
```
1. /signup 페이지 접속
2. 회원가입 폼 입력
3. 제출 버튼 클릭
4. /home으로 리다이렉트 확인
5. 로그아웃
6. /login 페이지 접속
7. 로그인 정보 입력
8. /home 접속 확인
```

### 4.2 예약 플로우
```
1. 로그인 상태로 /stores 접속
2. 업체 선택
3. 상품 선택 및 수량 입력
4. 예약 버튼 클릭
5. 예약 확인 페이지
6. /my-reservations에서 확인
```

### 4.3 예약 취소 플로우
```
1. /my-reservations 접속
2. 예약 선택
3. 취소 버튼 클릭
4. 취소 사유 입력
5. 취소 완료 확인
6. 상태 변경 확인
```

---

## 5. 에러 & 엣지 케이스

### 5.1 에러 케이스
| 시나리오 | 예상 동작 | 테스트 방법 |
|---------|----------|------------|
| 네트워크 오류 | 재시도/에러 표시 | MSW 에러 응답 |
| 서버 500 | 에러 페이지 | Mock 서버 에러 |
| 세션 만료 | 로그인 이동 | 만료된 토큰 |
| 권한 없음 | 403 페이지 | 다른 사용자 리소스 |

### 5.2 엣지 케이스
| 시나리오 | 예상 동작 | 테스트 방법 |
|---------|----------|------------|
| 빈 목록 | Empty state | 데이터 없는 상태 |
| 긴 텍스트 | 말줄임 처리 | 긴 문자열 입력 |
| 특수 문자 | 이스케이프 | XSS 페이로드 |
| 동시 요청 | 중복 방지 | 빠른 연속 클릭 |
| 대용량 | 페이지네이션 | 1000개 항목 |

---

## 6. 테스트 실행

### 6.1 명령어
```bash
# 유닛 테스트
npm test

# 커버리지
npm test -- --coverage

# E2E
npm run test:e2e

# 전체
npm run test:all
```

### 6.2 CI/CD
```yaml
# .github/workflows/test.yml
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: npm ci
      - run: npm test -- --coverage
      - run: npm run test:e2e
```

---

## 7. 품질 기준

### 7.1 테스트 통과 기준
- [ ] 모든 유닛 테스트 통과
- [ ] 모든 통합 테스트 통과
- [ ] 핵심 E2E 시나리오 통과
- [ ] 커버리지 70% 이상

### 7.2 릴리스 기준
- [ ] 블로커/크리티컬 버그 0건
- [ ] 메이저 버그 해결률 100%
- [ ] 성능 기준 충족

---

## 8. 테스트 결과 보고서

```markdown
## 테스트 결과 요약

- 실행일: YYYY-MM-DD
- 총 테스트: XXX개
- 성공: XXX개
- 실패: XXX개
- 커버리지: XX%

### 실패 테스트
| 테스트명 | 실패 사유 | 담당자 |
|---------|----------|-------|
```
