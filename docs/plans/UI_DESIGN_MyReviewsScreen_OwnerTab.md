# UI 디자인: MyReviewsScreen 업주 탭 추가

## 1. 화면 목적 및 사용자 시나리오

### 목적
- 업주가 자신의 매장에 달린 리뷰를 확인하고 답글을 달 수 있는 기능 추가
- 업주도 다른 업체에 리뷰를 작성할 수 있으므로, 두 가지 뷰를 탭으로 분리

### 사용자 시나리오
1. **업주 사용자**:
   - 마이페이지 > "작성한 리뷰" 클릭
   - 2개 탭 표시: "우리 가게 리뷰" (기본) / "내가 작성한 리뷰"
   - "우리 가게 리뷰" 탭: 고객이 작성한 리뷰 목록, 답글 작성/수정 가능
   - "내가 작성한 리뷰" 탭: 내가 작성한 리뷰 목록

2. **일반 소비자**:
   - 마이페이지 > "작성한 리뷰" 클릭
   - 탭 없이 기존 화면 유지 (내가 작성한 리뷰만)

---

## 2. 레이아웃 구조

### 업주 화면
```
+--------------------------------------------------+
|  [<-]          리뷰 관리                          |  (헤더)
+--------------------------------------------------+
| [우리 가게 리뷰]    |    [내가 작성한 리뷰]         |  (탭)
+--------------------------------------------------+
|  (선택된 탭에 따른 컨텐츠)                         |
+--------------------------------------------------+
```

### 일반 소비자 화면 (기존 유지)
```
+--------------------------------------------------+
|  [<-]         작성한 리뷰                         |  (헤더)
+--------------------------------------------------+
|  (리뷰 목록)                                       |
+--------------------------------------------------+
```

---

## 3. 컴포넌트 명세

### 3.1 탭 컴포넌트 (업주 전용)
| 요소 | 설명 |
|------|------|
| 탭 컨테이너 | 두 개의 동일한 크기 버튼 |
| 활성 탭 | 배경 #1A1A2E, 텍스트 흰색 |
| 비활성 탭 | 배경 #E8F5E9, 텍스트 초록색 |

### 3.2 우리 가게 리뷰 탭 내용
| 요소 | 설명 |
|------|------|
| 평점 요약 | 평균 별점, 총 리뷰 수, 별점 분포 그래프 |
| 리뷰 카드 | 고객명, 별점, 날짜, 리뷰 내용, 답글 영역 |
| 답글 버튼 | 미답변 리뷰에 "답글 달기" 버튼 |
| 답글 수정 | 답변 완료 리뷰에 답글 표시 + "수정" 링크 |

### 3.3 내가 작성한 리뷰 탭 내용
- 기존 MyReviewsScreen과 동일

---

## 4. 색상/폰트/간격 스펙

### 색상 (기존 프로젝트와 동일)
```javascript
const colors = {
  primary: '#00D563',      // 브랜드 메인
  secondary: '#1A1A2E',    // 활성 탭 배경
  tabInactiveBg: '#E8F5E9', // 비활성 탭 배경
  text: '#333333',
  textMuted: '#999999',
  background: '#F5F5F5',
  surface: '#FFFFFF',
  replyBg: '#F8F9FA',      // 답글 배경
  star: '#FFB800',         // 별점
};
```

### 탭 스타일
| 요소 | 값 |
|------|-----|
| 탭 컨테이너 패딩 | 15px |
| 탭 버튼 패딩 | 12px 세로 |
| 탭 borderRadius | 12px |
| 탭 간격 | 10px (gap) |

---

## 5. 상태별 UI

### 5.1 로딩 상태
- 중앙에 ActivityIndicator 표시

### 5.2 빈 상태 (우리 가게 리뷰)
```
+--------------------------------------------------+
|                                                  |
|                  [말풍선 아이콘]                   |
|                                                  |
|              아직 리뷰가 없습니다                  |
|                                                  |
+--------------------------------------------------+
```

### 5.3 빈 상태 (내가 작성한 리뷰)
- 기존과 동일

---

## 6. 인터랙션 정의

### 탭 전환
- 탭 클릭 시 즉시 해당 컨텐츠 표시
- 애니메이션 없이 즉시 전환

### 답글 작성 (우리 가게 리뷰)
1. "답글 달기" 버튼 클릭
2. 모달 열림 (TextInput + 취소/등록 버튼)
3. 등록 클릭 시 DB 업데이트 후 목록 새로고침

### 답글 수정 (우리 가게 리뷰)
1. 답글 영역의 "수정" 클릭
2. 모달 열림 (기존 답글 내용 표시)
3. 수정 후 등록 클릭

---

## 7. 데이터 조회 쿼리

### 업주 여부 확인
```typescript
const { data: store } = await supabase
  .from('stores')
  .select('id')
  .eq('user_id', user.id)
  .maybeSingle();

const isStoreOwner = !!store;
```

### 우리 가게 리뷰 조회
```typescript
const { data: reviews } = await supabase
  .from('reviews')
  .select(`
    id,
    rating,
    content,
    reply,
    replied_at,
    created_at,
    consumers (nickname)
  `)
  .eq('store_id', storeId)
  .order('created_at', { ascending: false });
```

---

## 8. 파일 수정

### MyReviewsScreen.tsx 수정사항
1. `isStoreOwner` 상태 추가
2. `storeId` 상태 추가
3. `activeTab` 상태 추가 ('store' | 'my')
4. `storeReviews` 상태 추가
5. 탭 UI 조건부 렌더링 (업주만)
6. 답글 작성/수정 모달 추가
7. 답글 처리 함수 추가

---

## 9. 접근성
- 탭에 accessibilityRole="tab" 추가
- 선택된 탭에 accessibilityState={{ selected: true }} 추가
