# UI 디자인: 리뷰 사진 업로드 기능

## 1. 개요
- **기능**: 리뷰 작성 시 사진 첨부 (최대 2장)
- **적용 화면**:
  - 리뷰 작성 모달 (픽업 완료 후)
  - 리뷰 수정 모달
  - 리뷰 표시 (MyReviewsScreen, StoreDetail, PurchaseHistoryScreen)

## 2. 디자인 요소

### 2.1 색상 팔레트
| 요소 | 색상 | Hex |
|------|------|-----|
| Primary | 초록 | #00D563 |
| Secondary | 다크 네이비 | #1A1A2E |
| Background | 연회색 | #F5F5F5 |
| Card | 흰색 | #FFFFFF |
| Text Primary | 진회색 | #333333 |
| Text Secondary | 회색 | #666666 |
| Border | 연회색 | #E0E0E0 |
| Error | 빨강 | #FF6B6B |

### 2.2 타이포그래피
- 버튼 텍스트: 14px, SemiBold
- 안내 텍스트: 12px, Regular

## 3. 컴포넌트 명세

### 3.1 사진 추가 버튼
```
+---------------+
|     📷      |
|  사진 추가   |
|   (0/2)     |
+---------------+
```
- **크기**: 80x80px
- **배경색**: #F5F5F5
- **테두리**: 2px dashed #E0E0E0
- **Border Radius**: 8px
- **아이콘**: 카메라 아이콘 (24px)
- **텍스트**: "사진 추가" (12px, #666)
- **카운터**: "(0/2)" (12px, #999)

### 3.2 이미지 미리보기
```
+---------------+
|             X |  <- 삭제 버튼 (우상단)
|    [이미지]   |
|               |
+---------------+
```
- **크기**: 80x80px
- **Border Radius**: 8px
- **삭제 버튼**:
  - 크기: 20x20px
  - 위치: 우상단 (-5px, -5px)
  - 배경: #FF6B6B
  - 아이콘: X (12px, white)
  - Border Radius: 10px (원형)

### 3.3 업로드 중 상태
```
+---------------+
|               |
|    [로딩]     |
|     70%      |
+---------------+
```
- **배경**: 반투명 오버레이 (rgba(0,0,0,0.3))
- **로딩 인디케이터**: ActivityIndicator (small, white)
- **진행률 텍스트**: (선택) 14px, white

### 3.4 사진 영역 레이아웃
```
[리뷰 내용 입력]

사진 (최대 2장)
+-------+  +-------+  +-------+
| 사진1 |  | 사진2 |  | 추가  |
+-------+  +-------+  +-------+
            <- 가로 스크롤 또는 고정 -->

[등록 버튼]
```
- **섹션 제목**: "사진 (최대 2장)" - 14px, SemiBold, #333
- **이미지 간격**: 10px
- **전체 높이**: 100px (패딩 포함)

## 4. 리뷰 표시 시 사진 노출

### 4.1 리뷰 카드 내 이미지
```
+--------------------------------+
| [별점] [날짜]                   |
| [리뷰 내용...]                  |
|                                |
| +-------+  +-------+           |
| | 사진1 |  | 사진2 |           |
| +-------+  +-------+           |
+--------------------------------+
```
- **이미지 크기**: 100x100px (작은 썸네일)
- **Border Radius**: 8px
- **이미지 간격**: 8px
- **이미지 클릭**: 확대 보기 (선택사항)

### 4.2 확대 보기 모달 (선택)
- **전체 화면 모달**
- **배경**: rgba(0,0,0,0.9)
- **닫기 버튼**: 우상단 X
- **이미지**: 화면 너비에 맞춤 (resizeMode: contain)
- **스와이프**: 좌우 스와이프로 사진 전환 (2장인 경우)

## 5. 상태별 UI

### 5.1 기본 상태
- 사진 추가 버튼만 표시
- 카운터 "(0/2)"

### 5.2 사진 1장 추가됨
- 사진1 미리보기 + 사진 추가 버튼
- 카운터 "(1/2)"

### 5.3 사진 2장 추가됨 (최대)
- 사진1 + 사진2 미리보기
- 사진 추가 버튼 숨김
- 안내 메시지: "최대 2장까지 추가할 수 있습니다"

### 5.4 업로드 중
- 해당 이미지에 로딩 오버레이
- 다른 버튼 비활성화

### 5.5 업로드 실패
- Alert: "사진 업로드에 실패했습니다. 다시 시도해주세요."

## 6. 인터랙션 정의

### 6.1 사진 추가 버튼 클릭
1. ActionSheet 표시:
   - "카메라로 촬영"
   - "앨범에서 선택"
   - "취소"
2. 권한 요청 (필요시)
3. 이미지 선택
4. 리사이즈 (1024px 이하로)
5. Supabase Storage 업로드
6. 미리보기 표시

### 6.2 삭제 버튼 클릭
1. 확인 없이 즉시 삭제 (미리보기에서만)
2. 실제 Storage 삭제는 리뷰 저장 시 처리

### 6.3 이미지 클릭 (리뷰 표시 시)
1. 확대 보기 모달 오픈
2. 배경 클릭 또는 X 버튼으로 닫기

## 7. 에러 처리

### 7.1 권한 거부
- Alert: "사진 접근 권한이 필요합니다. 설정에서 권한을 허용해주세요."
- "설정 열기" 버튼 (Linking으로 설정 앱 오픈)

### 7.2 파일 크기 초과
- 내부적으로 리사이즈 처리 (사용자에게 알림 없음)
- 원본 10MB 이상 시 Alert: "파일 크기가 너무 큽니다."

### 7.3 네트워크 오류
- Alert: "네트워크 오류가 발생했습니다. 다시 시도해주세요."
- 재시도 버튼

## 8. 기술 사양

### 8.1 이미지 리사이즈
- 최대 너비/높이: 1024px
- 품질: 0.8 (80%)
- 포맷: JPEG

### 8.2 Supabase Storage
- 버킷: `review-images`
- 경로: `{userId}/{timestamp}_{random}.jpg`
- 공개 URL 사용

### 8.3 타입 정의
```typescript
interface Review {
  // ... 기존 필드
  image_urls?: string[];  // 최대 2개
}
```

## 9. 접근성

- 이미지에 alt 텍스트: "리뷰 사진 1", "리뷰 사진 2"
- 삭제 버튼 accessibilityLabel: "사진 삭제"
- 추가 버튼 accessibilityLabel: "사진 추가 (현재 N장)"
