# 재고 할인 중개 플랫폼 테스트 계획서

> **문서 버전**: 1.0
> **작성일**: 2026-01-17
> **프로젝트명**: 재고 할인 중개 플랫폼 (투굿투고 유사 서비스)
> **현재 상태**: MVP 90% 완료

---

## 1. 개요

### 1.1 목적
- 소프트웨어 품질 보증
- 요구사항 충족 검증
- 결함 조기 발견
- 사용자 경험 품질 확보

### 1.2 범위

#### 테스트 대상
| 구분 | 기능 | 화면 파일 |
|------|------|----------|
| 인증 | 로그인, 회원가입 | LoginScreen, ConsumerSignupScreen, StoreSignupScreen |
| 소비자 | 업체 탐색, 예약, 리뷰 | StoreListHome, StoreDetail, ReservationScreen, MyReservations, ReviewScreen |
| 업주 | 상품/예약/캐시 관리 | StoreDashboard, StoreProductManagement, StoreReservationManagement, StoreCashManagement |
| 공통 | 마이페이지, 프로필 | MyPageScreen, ProfileEditScreen |

#### 제외 항목
| 제외 기능 | 제외 사유 |
|----------|----------|
| 운영자 대시보드 | 미구현 상태 |
| 지도 기반 탐색 | Phase 2 예정 |
| 실결제 (토스페이먼츠) | 연동 미완료, 데모 모드 |
| 푸시 알림 | Phase 2 예정 |

### 1.3 테스트 환경

| 환경 | 용도 | 설정 |
|------|------|------|
| Development | 개발 테스트 | Expo Go + localhost |
| Device | 실기기 테스트 | iOS/Android 실기기 |
| Supabase | 백엔드 | qycwdncplofgzdrjtklb.supabase.co |

---

## 2. 테스트 전략

### 2.1 테스트 피라미드

```
        /\
       /  \     수동 E2E (10%)
      /----\    - 핵심 플로우 검증
     /      \
    /--------\  API 테스트 (30%)
   /          \ - Supabase RPC/쿼리
  /------------\
 /              \ 컴포넌트 테스트 (60%)
/----------------\- 화면별 기능 검증
```

### 2.2 테스트 유형별 전략

| 유형 | 도구 | 대상 | 담당 |
|------|------|------|------|
| 컴포넌트 테스트 | 수동 | 26개 화면 | 테스터 |
| API 테스트 | Supabase Dashboard | RPC 함수, 쿼리 | 개발자 |
| E2E 테스트 | Expo Go | 핵심 플로우 | 테스터 |
| 회귀 테스트 | 체크리스트 | 버그 수정 후 | 개발자 |

---

## 3. 테스트 계정

### 3.1 테스트 계정 목록

| 유형 | 이메일 | 비밀번호 | 용도 |
|------|--------|----------|------|
| 소비자 | consumer@test.com | test1234 | 소비자 플로우 테스트 |
| 업주 | storeowner@gmail.com | store1234 | 업주 플로우 테스트 |
| 신규 소비자 | newuser@test.com | test1234 | 회원가입 테스트 |

### 3.2 테스트 데이터

#### 테스트 업체
- **업체명**: 테스트베이커리
- **주소**: 서울시 강남구
- **캐시 잔액**: 1,000,000원

#### 테스트 상품
| 상품명 | 정가 | 할인가 | 재고 | 카테고리 |
|--------|------|--------|------|----------|
| 크로와상 | 5,000원 | 3,000원 | 10개 | 빵 |
| 식빵 | 4,000원 | 2,500원 | 5개 | 빵 |
| 케이크 | 25,000원 | 15,000원 | 3개 | 빵 |

---

## 4. 핵심 사용자 플로우 테스트

### 4.1 소비자 플로우

#### Flow 1: 회원가입 → 로그인
```
1. 앱 실행
2. "회원가입" 버튼 클릭
3. "일반 고객" 선택
4. 이메일, 비밀번호, 닉네임 입력
5. 회원가입 완료 확인
6. 로그인 화면으로 이동
7. 이메일/비밀번호 입력
8. 로그인 성공 → StoreListHome 표시
```

| 단계 | 검증 항목 | 예상 결과 | 통과 |
|------|----------|----------|------|
| 3 | 유형 선택 화면 | 일반 고객/사장님 옵션 표시 | ☐ |
| 5 | 회원가입 API | consumers 테이블에 레코드 생성 | ☐ |
| 8 | 로그인 후 화면 | 업체 리스트 표시 | ☐ |

#### Flow 2: 업체 탐색 → 예약
```
1. StoreListHome에서 업체 목록 확인
2. 검색창에 "베이커리" 입력
3. 검색 결과 확인
4. 업체 카드 클릭 → StoreDetail
5. 상품 목록 확인
6. "예약하기" 버튼 클릭
7. 수량 선택 (2개)
8. 픽업 시간 선택
9. 예약 확정
10. 예약 번호 확인
```

| 단계 | 검증 항목 | 예상 결과 | 통과 |
|------|----------|----------|------|
| 1 | 업체 목록 | 승인된 업체만 표시 | ☐ |
| 3 | 검색 기능 | 검색어 포함 업체 표시 | ☐ |
| 5 | 상품 목록 | 활성 상품만 표시, 재고 확인 | ☐ |
| 9 | 예약 생성 | 예약번호 R+날짜+일련번호 형식 | ☐ |
| 9 | 재고 차감 | reserved_quantity 증가 | ☐ |

#### Flow 3: 예약 확인 → 리뷰 작성
```
1. MyReservations 화면 접근
2. 예약 목록에서 "완료됨" 예약 확인
3. "리뷰 작성" 버튼 클릭
4. 별점 4점 선택
5. 리뷰 내용 작성
6. 저장
7. 업체 상세에서 리뷰 확인
8. 업체 평균 평점 업데이트 확인
```

| 단계 | 검증 항목 | 예상 결과 | 통과 |
|------|----------|----------|------|
| 2 | 예약 상태 구분 | pending/confirmed/completed/cancelled 표시 | ☐ |
| 3 | 리뷰 버튼 | 완료된 예약만 리뷰 작성 가능 | ☐ |
| 6 | 리뷰 저장 | reviews 테이블에 저장 | ☐ |
| 8 | 평점 업데이트 | stores.average_rating 자동 갱신 | ☐ |

### 4.2 업주 플로우

#### Flow 4: 업주 로그인 → 대시보드
```
1. 업주 계정으로 로그인
2. StoreListHome 표시 (소비자 화면과 동일)
3. 마이페이지 접근
4. "사장님 페이지" 버튼 클릭
5. StoreDashboard 표시
6. 통계 정보 확인 (예약 수, 매출, 상품 수)
```

| 단계 | 검증 항목 | 예상 결과 | 통과 |
|------|----------|----------|------|
| 2 | 통합 UX | 업주도 소비자 화면 사용 가능 | ☐ |
| 4 | 사장님 페이지 버튼 | 업주만 버튼 표시됨 | ☐ |
| 6 | 대시보드 통계 | 실시간 데이터 표시 | ☐ |

#### Flow 5: 상품 등록 → 수정 → 삭제
```
1. StoreDashboard → 상품 관리
2. "+ 상품 등록" 버튼 클릭
3. 상품 정보 입력
   - 상품명: 테스트 상품
   - 정가: 10,000원
   - 할인가: 7,000원
   - 재고: 5개
   - 카테고리: 빵
4. 저장
5. 상품 목록에서 확인
6. 상품 수정 (가격 변경)
7. 상품 삭제
```

| 단계 | 검증 항목 | 예상 결과 | 통과 |
|------|----------|----------|------|
| 4 | 상품 등록 | products 테이블에 저장 | ☐ |
| 4 | 할인율 계산 | 30% 자동 계산 | ☐ |
| 5 | 목록 표시 | 즉시 목록에 표시 | ☐ |
| 7 | 상품 삭제 | is_active = false 처리 | ☐ |

#### Flow 6: 예약 관리 (확인 → 완료)
```
1. StoreDashboard → 예약 관리
2. "대기중" 예약 확인
3. "확인" 버튼 클릭
4. 수수료 차감 확인 (15%)
5. "픽업 완료" 버튼 클릭
6. 예약 상태 "완료" 확인
```

| 단계 | 검증 항목 | 예상 결과 | 통과 |
|------|----------|----------|------|
| 3 | 예약 확인 | status: pending → confirmed | ☐ |
| 4 | 수수료 차감 | cash_balance 감소, cash_transactions 기록 | ☐ |
| 5 | 픽업 완료 | status: confirmed → completed | ☐ |

#### Flow 7: 캐시 관리
```
1. StoreDashboard → 캐시 관리
2. 현재 잔액 확인
3. "충전하기" 버튼 클릭
4. 50,000원 선택
5. 충전 완료 (데모 모드)
6. 잔액 증가 확인
7. "거래 내역" 확인
```

| 단계 | 검증 항목 | 예상 결과 | 통과 |
|------|----------|----------|------|
| 2 | 잔액 표시 | stores.cash_balance 값 표시 | ☐ |
| 5 | 충전 처리 | RPC 함수 charge_store_cash 호출 | ☐ |
| 7 | 거래 내역 | 충전/수수료 내역 날짜순 표시 | ☐ |

---

## 5. API 테스트 계획

### 5.1 인증 API

#### 회원가입 API
| 케이스 | 입력 | 예상 결과 | 상태 코드 |
|--------|------|----------|----------|
| 소비자 회원가입 성공 | 유효한 이메일/비밀번호/닉네임 | user + consumer 레코드 생성 | 200 |
| 중복 이메일 | 기존 이메일 | 에러 메시지 | 400 |
| 중복 닉네임 | 기존 닉네임 | 에러 메시지 | 400 |
| 잘못된 이메일 형식 | invalid-email | 에러 메시지 | 400 |
| 짧은 비밀번호 | 5자 미만 | 에러 메시지 | 400 |

#### 로그인 API
| 케이스 | 입력 | 예상 결과 | 상태 코드 |
|--------|------|----------|----------|
| 로그인 성공 | 유효한 이메일/비밀번호 | JWT 토큰 반환 | 200 |
| 잘못된 비밀번호 | 틀린 비밀번호 | 에러 메시지 | 400 |
| 존재하지 않는 이메일 | 미가입 이메일 | 에러 메시지 | 400 |

### 5.2 예약 API

#### 예약 생성
| 케이스 | 조건 | 예상 결과 |
|--------|------|----------|
| 정상 예약 | 재고 충분, 캐시 충분 | 예약 생성 성공 |
| 재고 부족 | 요청 수량 > 가용 재고 | 에러: 재고 부족 |
| 캐시 부족 | 업체 캐시 < 수수료 | 에러: 캐시 부족 |
| 비활성 상품 | is_active = false | 에러: 상품 없음 |
| 비승인 업체 | is_approved = false | 에러: 업체 비활성 |

#### 예약 상태 변경
| 케이스 | 이전 상태 | 새 상태 | 부가 동작 |
|--------|----------|--------|----------|
| 예약 확인 | pending | confirmed | 수수료 차감 |
| 픽업 완료 | confirmed | completed | 완료 시간 기록 |
| 예약 취소 | pending | cancelled | 재고 복구 |
| 예약 취소 | confirmed | cancelled | 재고 복구, 환불 |

### 5.3 RPC 함수 테스트

#### charge_store_cash (캐시 충전)
```sql
-- 테스트 쿼리
SELECT * FROM charge_store_cash(
  '업체_UUID',
  50000,
  '테스트 충전'
);
```

| 입력 | 예상 결과 |
|------|----------|
| 유효한 store_id, 양수 금액 | 잔액 증가, 거래 내역 생성 |
| 잘못된 store_id | 에러 |
| 음수 금액 | 에러 |

#### 예약 번호 생성 트리거
| 조건 | 예상 결과 |
|------|----------|
| 신규 예약 생성 | R + YYYYMMDD + 6자리 일련번호 |
| 같은 날 두 번째 예약 | 일련번호 +1 |

---

## 6. 에러 케이스 & 엣지 케이스

### 6.1 에러 케이스

| 시나리오 | 예상 동작 | 테스트 방법 |
|---------|----------|------------|
| 네트워크 오류 | 오류 메시지 표시, 재시도 옵션 | 네트워크 끄기 |
| 세션 만료 | 로그인 화면으로 이동 | 토큰 수동 삭제 |
| 서버 오류 (500) | 에러 메시지 표시 | Supabase 일시 중단 |
| 권한 없음 (403) | 에러 메시지 표시 | 다른 사용자 데이터 접근 시도 |
| 데이터 없음 (404) | Empty state 표시 | 존재하지 않는 ID 접근 |

### 6.2 엣지 케이스

| 시나리오 | 예상 동작 | 테스트 방법 |
|---------|----------|------------|
| 빈 업체 목록 | "주변에 업체가 없습니다" 표시 | 모든 업체 비활성화 |
| 빈 예약 목록 | "예약 내역이 없습니다" 표시 | 신규 계정 사용 |
| 재고 0개 | 예약 버튼 비활성화 | 재고 0으로 설정 |
| 캐시 잔액 0원 | 예약 확인 불가 알림 | 캐시 0으로 설정 |
| 매우 긴 텍스트 | 말줄임 처리 (...) | 긴 상품명/리뷰 입력 |
| 특수 문자 입력 | 정상 처리 | <script>, SQL 인젝션 시도 |
| 동시 예약 | 한 건만 성공 | 두 기기에서 동시 예약 |
| 빠른 연속 클릭 | 중복 요청 방지 | 버튼 빠르게 여러 번 클릭 |

---

## 7. 화면별 체크리스트

### 7.1 인증 화면

#### LoginScreen
- [ ] 이메일 입력 필드 표시
- [ ] 비밀번호 입력 필드 표시 (마스킹)
- [ ] 로그인 버튼 작동
- [ ] 회원가입 링크 작동
- [ ] 잘못된 입력 시 에러 메시지
- [ ] 로딩 상태 표시

#### ConsumerSignupScreen
- [ ] 이메일 형식 검증
- [ ] 비밀번호 최소 길이 검증
- [ ] 닉네임 중복 확인
- [ ] 가입 성공 후 로그인 화면 이동
- [ ] 에러 메시지 표시

#### StoreSignupScreen
- [ ] 업체명 필수 입력 검증
- [ ] 주소 입력 필드
- [ ] 사업자등록번호 입력
- [ ] 카테고리 선택
- [ ] 관리자 승인 대기 안내

### 7.2 소비자 화면

#### StoreListHome
- [ ] 업체 목록 표시
- [ ] 업체 카드 정보 (이름, 평점, 거리)
- [ ] 검색 기능
- [ ] 즐겨찾기(하트) 버튼
- [ ] 카테고리 필터
- [ ] 정렬 옵션 (거리순/평점순)
- [ ] Pull to refresh

#### StoreDetail
- [ ] 업체 정보 표시
- [ ] 영업시간 표시
- [ ] 상품 목록 표시
- [ ] 상품 카드 (이미지, 가격, 할인율, 재고)
- [ ] 리뷰 목록 표시
- [ ] 평균 평점 표시
- [ ] 예약하기 버튼

#### ReservationScreen
- [ ] 상품 정보 표시
- [ ] 수량 선택 (+/- 버튼)
- [ ] 픽업 시간 선택
- [ ] 총 금액 계산
- [ ] 절약 금액 표시
- [ ] 예약 버튼

#### MyReservations
- [ ] 예약 목록 표시
- [ ] 상태별 필터 (전체/진행중/완료/취소)
- [ ] 예약 카드 정보
- [ ] 예약 번호 표시
- [ ] 취소 버튼 (조건부)
- [ ] 리뷰 작성 버튼 (완료된 예약)

#### ReviewScreen
- [ ] 별점 선택 (1-5점)
- [ ] 리뷰 텍스트 입력
- [ ] 저장 버튼
- [ ] 이미 작성된 리뷰 수정 불가

### 7.3 업주 화면

#### StoreDashboard
- [ ] 캐시 잔액 표시
- [ ] 대기중 예약 수
- [ ] 오늘 매출
- [ ] 상품 수
- [ ] 메뉴 버튼들 (상품/예약/캐시/리뷰 관리)
- [ ] 로그아웃 버튼

#### StoreProductManagement
- [ ] 상품 목록 표시
- [ ] 상품 카드 (이미지, 가격, 재고, 상태)
- [ ] 추가 버튼
- [ ] 수정 버튼
- [ ] 삭제 버튼 (확인 다이얼로그)
- [ ] 판매 상태 토글

#### StoreReservationManagement
- [ ] 예약 목록 표시
- [ ] 상태별 필터
- [ ] 예약 상세 정보
- [ ] 확인 버튼 (pending → confirmed)
- [ ] 픽업 완료 버튼 (confirmed → completed)
- [ ] 취소 버튼

#### StoreCashManagement
- [ ] 현재 잔액 표시
- [ ] 충전 버튼
- [ ] 충전 금액 선택
- [ ] 거래 내역 보기 버튼

#### StoreCashHistory
- [ ] 거래 내역 목록
- [ ] 거래 유형 아이콘 (충전/수수료/환불)
- [ ] 날짜/시간 표시
- [ ] 금액 표시 (+/-)
- [ ] 잔액 표시

---

## 8. 테스트 실행 계획

### 8.1 테스트 순서

```
1. 환경 설정 검증
   |-- Supabase 연결 확인
   |-- 테스트 계정 확인
   |
2. 인증 테스트 (Flow 1)
   |
3. 소비자 플로우 테스트 (Flow 2, 3)
   |
4. 업주 플로우 테스트 (Flow 4, 5, 6, 7)
   |
5. API 테스트
   |
6. 에러/엣지 케이스 테스트
   |
7. 화면별 상세 체크리스트
   |
8. 결과 정리 및 버그 리포트
```

### 8.2 테스트 명령어

```bash
# 개발 서버 시작
cd C:\Users\user\claude-test\app
npx expo start

# Expo Go로 테스트
# 1. 휴대폰에 Expo Go 앱 설치
# 2. QR 코드 스캔
# 3. 앱 실행

# 또는 웹 테스트
npx expo start --web
```

### 8.3 테스트 도구

| 도구 | 용도 | 설치 방법 |
|------|------|----------|
| Expo Go | 실기기 테스트 | App Store / Play Store |
| Supabase Dashboard | DB 확인, SQL 실행 | 웹 접속 |
| VS Code | 로그 확인 | 설치됨 |

---

## 9. 품질 기준

### 9.1 테스트 통과 기준

- [ ] 7개 핵심 플로우 모두 통과
- [ ] 인증 API 5개 케이스 모두 통과
- [ ] 예약 API 5개 케이스 모두 통과
- [ ] 에러 케이스 5개 적절히 처리됨
- [ ] 엣지 케이스 8개 적절히 처리됨
- [ ] 26개 화면 기본 동작 확인

### 9.2 릴리스 기준

- [ ] 블로커(앱 크래시) 버그 0건
- [ ] 크리티컬(핵심 기능 불가) 버그 0건
- [ ] 메이저(기능 장애) 버그 해결률 100%
- [ ] 마이너(UX 개선) 버그 문서화

### 9.3 버그 심각도 분류

| 심각도 | 정의 | 예시 |
|--------|------|------|
| 블로커 | 앱 실행/사용 불가 | 앱 크래시, 로그인 불가 |
| 크리티컬 | 핵심 기능 불가 | 예약 불가, 결제 오류 |
| 메이저 | 기능 장애 | 검색 안 됨, 필터 오류 |
| 마이너 | UX 불편 | 레이아웃 깨짐, 오타 |

---

## 10. 테스트 결과 보고서 템플릿

```markdown
## 테스트 결과 요약

- **실행일**: YYYY-MM-DD
- **테스터**:
- **환경**: Expo Go / 웹 브라우저
- **기기**: iPhone/Android/Web

### 핵심 플로우 테스트
| 플로우 | 결과 | 비고 |
|--------|------|------|
| Flow 1: 회원가입 → 로그인 | ✅/❌ | |
| Flow 2: 업체 탐색 → 예약 | ✅/❌ | |
| Flow 3: 예약 확인 → 리뷰 | ✅/❌ | |
| Flow 4: 업주 로그인 → 대시보드 | ✅/❌ | |
| Flow 5: 상품 관리 | ✅/❌ | |
| Flow 6: 예약 관리 | ✅/❌ | |
| Flow 7: 캐시 관리 | ✅/❌ | |

### 발견된 버그
| ID | 심각도 | 화면 | 설명 | 재현 방법 |
|----|--------|------|------|----------|
| B-001 | | | | |
| B-002 | | | | |

### 개선 제안
| ID | 화면 | 제안 내용 |
|----|------|----------|
| I-001 | | |
| I-002 | | |
```

---

## 11. 테스트 일정

### 11.1 1차 테스트 (MVP 검증)

| 일자 | 작업 | 담당 |
|------|------|------|
| Day 1 | 테스트 환경 셋업, 계정 생성 | 개발자 |
| Day 1 | 인증 플로우 테스트 | 테스터 |
| Day 2 | 소비자 플로우 테스트 | 테스터 |
| Day 2 | 업주 플로우 테스트 | 테스터 |
| Day 3 | API 테스트, 에러 케이스 | 개발자 |
| Day 3 | 버그 수정 | 개발자 |
| Day 4 | 회귀 테스트 | 테스터 |

### 11.2 2차 테스트 (베타 전)

| 일자 | 작업 | 담당 |
|------|------|------|
| Day 1 | 실기기 테스트 (iOS) | 테스터 |
| Day 2 | 실기기 테스트 (Android) | 테스터 |
| Day 3 | 성능 테스트 | 개발자 |
| Day 4 | 최종 버그 수정 | 개발자 |

---

## 12. 부록

### 12.1 Supabase Dashboard 접속

1. https://supabase.com 로그인
2. 프로젝트 선택: `qycwdncplofgzdrjtklb`
3. 왼쪽 메뉴에서 기능 선택:
   - **Table Editor**: 테이블 데이터 확인/수정
   - **SQL Editor**: SQL 직접 실행
   - **Authentication**: 사용자 관리

### 12.2 테스트 데이터 초기화 SQL

```sql
-- 테스트 예약 삭제
DELETE FROM reservations WHERE consumer_id IN (
  SELECT id FROM consumers WHERE nickname LIKE 'test%'
);

-- 테스트 리뷰 삭제
DELETE FROM reviews WHERE consumer_id IN (
  SELECT id FROM consumers WHERE nickname LIKE 'test%'
);

-- 테스트 소비자 삭제
DELETE FROM consumers WHERE nickname LIKE 'test%';

-- 테스트 상품 재고 리셋
UPDATE products
SET stock_quantity = 10, reserved_quantity = 0
WHERE store_id = '테스트 업체 UUID';
```

### 12.3 관련 문서

| 문서 | 위치 |
|------|------|
| PRD | `docs/PRD.md` |
| TRD | `docs/TRD.md` |
| 프로젝트 분석 보고서 | `docs/PROJECT-ANALYSIS-REPORT.md` |

---

**문서 작성**: 테스트 계획 스킬
**검토일**: 2026-01-17
**다음 단계**: 테스트 실행 및 결과 기록

---

> 이 테스트 계획서는 MVP 단계의 핵심 기능 검증에 초점을 맞추었습니다.
> Phase 2 기능(지도, 실결제, 알림) 추가 시 테스트 항목을 확장해야 합니다.
