# 개발 로드맵

> **재고 할인 중개 플랫폼 - Development Roadmap**
>
> - **Project**: 재고 할인 중개 플랫폼
> - **Version**: MVP 1.0.0 → Phase 2 → Phase 3
> - **Last Updated**: 2026-01-10

---

## 📋 목차

1. [개발 철학](#개발-철학)
2. [MVP (Phase 1)](#mvp-phase-1)
3. [Phase 2](#phase-2)
4. [Phase 3](#phase-3)
5. [기술 부채 관리](#기술-부채-관리)
6. [일정 및 마일스톤](#일정-및-마일스톤)

---

## 개발 철학

### 핵심 원칙

1. **MVP 먼저**: 핵심 기능부터 빠르게 출시
2. **데이터 중심**: 사용자 피드백을 통한 개선
3. **점진적 개선**: 완벽보다는 빠른 반복
4. **기술 부채 최소화**: 초기부터 확장 가능한 구조

### 우선순위 기준

```
[높음] 사용자가 플랫폼을 사용할 수 없음
[중간] 사용자 경험이 저하됨
[낮음] 개선되면 좋지만 필수는 아님
```

---

## MVP (Phase 1)

> **목표**: 핵심 기능만 구현하여 빠르게 시장 진입
>
> **예상 기간**: 8-10주
>
> **출시 기준**: 소비자가 업체를 찾고 예약할 수 있으며, 업체가 상품을 등록하고 캐시를 관리할 수 있음

### ✅ 필수 기능

#### 1. 인증 시스템 (1주)

- [ ] 회원가입 (소비자/업체 구분)
  - [ ] 이메일 + 비밀번호
  - [ ] 닉네임 설정 (소비자)
  - [ ] 업체 정보 입력 (업체명, 주소, 전화번호)
- [ ] 로그인/로그아웃
- [ ] 자동 로그인 (JWT 토큰)
- [ ] 비밀번호 찾기 (이메일 인증)

**구현 순서**
```
1. Supabase Auth 설정
2. 회원가입 화면 (소비자/업체 선택)
3. 프로필 생성 로직
4. 로그인 화면
5. 자동 로그인 처리
```

---

#### 2. 소비자 - 업체 탐색 (1.5주)

- [ ] 업체 리스트 (거리순)
  - [ ] 현재 위치 기반
  - [ ] 거리 표시
  - [ ] 평점/거래 건수 표시
  - [ ] 최대 할인율 표시
  - [ ] 무한 스크롤 (페이지네이션)
- [ ] 업체 상세 페이지
  - [ ] 업체 정보
  - [ ] 상품 리스트
  - [ ] 리뷰 리스트 (평점순)
  - [ ] 즐겨찾기 버튼
- [ ] 추천순 정렬 (평점순)

**구현 순서**
```
1. 위치 권한 요청
2. 거리 계산 RPC 함수
3. 업체 리스트 화면
4. 업체 상세 화면
5. 즐겨찾기 기능
6. 정렬 기능 (거리순/평점순)
```

**UI 컴포넌트**
- `StoreCard`: 업체 카드
- `StoreList`: 업체 리스트
- `StoreDetail`: 업체 상세
- `ProductCard`: 상품 카드

---

#### 3. 소비자 - 예약 시스템 (2주)

- [ ] 상품 예약
  - [ ] 수량 선택
  - [ ] 픽업 시간 선택
  - [ ] 예약 확정
  - [ ] 예약 번호 발급
- [ ] 예약 내역 조회
  - [ ] 진행 중 예약
  - [ ] 완료된 예약
  - [ ] 취소된 예약
- [ ] 예약 취소 (60분 이내)
- [ ] 픽업 완료 (QR/예약번호 표시)

**구현 순서**
```
1. 예약 생성 API (Edge Function)
2. 예약 화면 (수량/시간 선택)
3. 예약 확정 화면 (예약 번호)
4. 예약 내역 화면
5. 예약 취소 기능
6. 픽업 완료 화면
```

**중요 로직**
- 재고 차감 (동시성 제어)
- 예약 번호 자동 생성
- 취소 시간 제한 (60분)

---

#### 4. 소비자 - 리뷰 시스템 (1주)

- [ ] 리뷰 작성
  - [ ] 별점 (1~5)
  - [ ] 텍스트 리뷰
  - [ ] 이미지 업로드 (선택)
- [ ] 리뷰 조회
  - [ ] 업체 상세에서 리뷰 목록
  - [ ] 최신순 정렬
- [ ] 리뷰 작성 권한 관리
  - [ ] 픽업 완료 후 작성 가능
  - [ ] 거래 횟수만큼 작성 가능

**구현 순서**
```
1. 리뷰 작성 화면
2. 이미지 업로드 (Supabase Storage)
3. 리뷰 생성 API
4. 리뷰 목록 화면
5. 리뷰 권한 관리 (review_rights 테이블)
```

---

#### 5. 업체 - 상품 관리 (1.5주)

- [ ] 상품 등록
  - [ ] 상품명, 설명
  - [ ] 이미지 업로드 (최대 5장)
  - [ ] 정가, 할인가
  - [ ] 재고 수량
  - [ ] 제조일, 유통기한
- [ ] 상품 수정
- [ ] 상품 삭제
- [ ] 상품 목록 조회

**구현 순서**
```
1. 상품 등록 화면
2. 이미지 업로드 (다중)
3. 상품 생성 API
4. 상품 목록 화면
5. 상품 수정/삭제 기능
```

**자동 계산**
- 할인율 자동 계산 (DB에서 GENERATED)
- 재고 실시간 동기화

---

#### 6. 업체 - 캐시 관리 (1.5주)

- [ ] 캐시 잔액 표시
  - [ ] 메인 대시보드에 표시
  - [ ] 상태 (충분/부족/소진)
- [ ] 캐시 충전
  - [ ] 금액 선택 (5만, 10만, 30만, 50만, 100만)
  - [ ] 토스 페이먼츠 연동
  - [ ] 결제 완료 후 잔액 업데이트
- [ ] 캐시 사용 내역
  - [ ] 충전 내역
  - [ ] 차감 내역 (예약별)
- [ ] 캐시 부족 알림 (< 1만원)

**구현 순서**
```
1. 토스 페이먼츠 SDK 연동
2. 캐시 충전 화면
3. 결제 승인 API
4. Webhook 처리 (Edge Function)
5. 캐시 내역 화면
6. 캐시 부족 알림 (Trigger)
```

**토스 페이먼츠 플로우**
```
1. 충전 금액 선택
2. 토스 결제창 열기 (WebView)
3. 결제 승인
4. Webhook → Supabase Edge Function
5. store_cash 업데이트
6. 알림 발송
```

---

#### 7. 공통 - 마이페이지 (1주)

**소비자**
- [ ] 프로필 정보 (닉네임, 프로필 사진)
- [ ] 누적 절약 금액 표시
- [ ] 예약 내역 (3개월)
- [ ] 즐겨찾기 업체
- [ ] 알림 설정
- [ ] 로그아웃

**업체**
- [ ] 업체 정보 수정
  - [ ] 업체명, 설명
  - [ ] 영업시간
  - [ ] 정책 (환불/교환/노쇼)
- [ ] 캐시 잔액
- [ ] 예약 관리
- [ ] 리뷰 관리
- [ ] 로그아웃

**구현 순서**
```
1. 프로필 조회 API
2. 마이페이지 화면 (소비자/업체 분기)
3. 프로필 수정 화면
4. 통계 표시 (누적 절약 금액 등)
```

---

#### 8. 알림 시스템 (1주)

- [ ] Expo Push Notifications 설정
- [ ] 푸시 토큰 저장
- [ ] 알림 발송 (Edge Function)
  - [ ] 예약 확정 (업체에게)
  - [ ] 예약 취소 (상대방에게)
  - [ ] 리뷰 작성 (업체에게)
  - [ ] 캐시 부족 (업체에게)
- [ ] 알림 목록 화면
- [ ] 알림 읽음 처리

**구현 순서**
```
1. Expo Push Notifications 설정
2. 푸시 토큰 등록
3. 알림 발송 Edge Function
4. 알림 목록 화면
5. 알림 읽음 처리
```

---

### 🧪 MVP 테스트 체크리스트

#### 소비자 플로우
- [ ] 회원가입 → 로그인
- [ ] 주변 업체 조회 (거리순/평점순)
- [ ] 업체 상세 → 상품 선택 → 예약
- [ ] 예약 내역 확인
- [ ] 예약 취소 (60분 이내)
- [ ] 픽업 완료
- [ ] 리뷰 작성
- [ ] 즐겨찾기 추가/삭제

#### 업체 플로우
- [ ] 회원가입 → 로그인
- [ ] 상품 등록 (이미지 포함)
- [ ] 예약 알림 수신
- [ ] 예약 내역 확인
- [ ] 픽업 완료 시 캐시 차감 확인
- [ ] 캐시 충전 (토스 페이먼츠)
- [ ] 리뷰 알림 수신
- [ ] 리뷰 답글 작성

#### 시스템 안정성
- [ ] 동시 예약 시 재고 정합성
- [ ] 캐시 부족 시 업체 비활성화
- [ ] 예약 취소 시 재고 복구
- [ ] 픽업 완료 시 모든 데이터 업데이트

---

## Phase 2

> **목표**: 사용자 경험 개선 및 부가 기능 추가
>
> **예상 기간**: 4-6주
>
> **출시 기준**: 사용자 피드백 반영, 편의 기능 추가

### ✅ 추가 기능

#### 1. 지도 기반 업체 탐색 (1.5주)

- [ ] 지도에 업체 마커 표시
  - [ ] 클러스터링 (마커 그룹화)
  - [ ] 마커 클릭 → 업체 상세
- [ ] 지도/리스트 전환
- [ ] 현재 위치 버튼
- [ ] 지도 이동 시 업체 재조회

**구현 순서**
```
1. Google Maps SDK 연동
2. 업체 마커 표시
3. 클러스터링
4. 지도/리스트 토글
5. 지도 이동 이벤트 처리
```

---

#### 2. 소셜 로그인 (1주)

- [ ] 카카오 로그인
- [ ] Apple 로그인 (iOS)
- [ ] Google 로그인

**구현 순서**
```
1. Supabase Auth Provider 설정
2. 카카오 SDK 연동
3. Apple Sign In 연동
4. Google Sign In 연동
5. 소셜 로그인 프로필 연동
```

---

#### 3. 알림 구독 시스템 (1주)

- [ ] 업체별 알림 구독
  - [ ] 전체 상품 알림
  - [ ] 특정 상품 알림
- [ ] 알림 구독 관리 화면
- [ ] 상품 등록 시 구독자에게 알림

**구현 순서**
```
1. notification_subscriptions 테이블 활용
2. 알림 구독 설정 화면
3. 상품 등록 시 알림 발송 로직
4. 구독 관리 화면
```

---

#### 4. 검색 기능 (1주)

- [ ] 업체명 검색
- [ ] 상품명 검색
- [ ] 최근 검색어
- [ ] 인기 검색어

**구현 순서**
```
1. Full-Text Search (PostgreSQL)
2. 검색 화면
3. 검색 결과 화면
4. 최근 검색어 저장 (AsyncStorage)
```

---

#### 5. 카카오톡 알림 (1주)

- [ ] Kakao Alimtalk API 연동
- [ ] 예약 확정 알림
- [ ] 예약 취소 알림
- [ ] 픽업 시간 리마인더

**구현 순서**
```
1. Kakao Alimtalk 템플릿 등록
2. Edge Function에서 알림 발송
3. 템플릿별 메시지 작성
```

---

#### 6. 리뷰 개선 (1주)

- [ ] 리뷰 정렬 (최신순/별점순/도움순)
- [ ] 리뷰 신고 기능
- [ ] 업체 답글 작성
- [ ] 리뷰 이미지 확대

---

#### 7. 업체 대시보드 개선 (1.5주)

- [ ] 통계 표시
  - [ ] 오늘/이번 주/이번 달 예약 수
  - [ ] 매출 통계
  - [ ] 리뷰 평균 평점
- [ ] 예약 캘린더 뷰
- [ ] 인기 상품 순위

---

### 🧪 Phase 2 테스트 체크리스트

- [ ] 지도에서 업체 탐색
- [ ] 소셜 로그인
- [ ] 알림 구독 설정
- [ ] 검색 기능
- [ ] 카카오톡 알림 수신

---

## Phase 3

> **목표**: 플랫폼 확장 및 고급 기능
>
> **예상 기간**: 6-8주

### ✅ 고급 기능

#### 1. 운영자 대시보드 (2주)

- [ ] 전체 통계
  - [ ] 사용자 수 (소비자/업체)
  - [ ] 예약 수, 매출
  - [ ] 리뷰 수, 평균 평점
- [ ] 사용자 관리
  - [ ] 사용자 목록
  - [ ] 사용자 정지/해제
- [ ] 업체 관리
  - [ ] 업체 승인/거부
  - [ ] 업체 정지/해제
- [ ] 리뷰 관리
  - [ ] 리뷰 삭제
  - [ ] 신고 리뷰 처리
- [ ] 수수료 관리
  - [ ] 업체별 수수료율 설정

---

#### 2. 실시간 채팅 (2주)

- [ ] 소비자 ↔ 업체 채팅
- [ ] 메시지 알림
- [ ] 이미지 전송
- [ ] 채팅 내역

---

#### 3. 쿠폰/프로모션 (1.5주)

- [ ] 쿠폰 발급 (업체)
- [ ] 쿠폰 사용 (소비자)
- [ ] 첫 구매 할인
- [ ] 추천인 프로그램

---

#### 4. 네이버/카카오 지도 전환 (1주)

- [ ] Kakao Map SDK 연동
- [ ] 기존 Google Maps 대체
- [ ] 지도 기능 이관

---

#### 5. 다크 모드 (0.5주)

- [ ] 테마 전환
- [ ] 다크/라이트 모드

---

#### 6. 다국어 지원 (1주)

- [ ] i18n 설정
- [ ] 한국어/영어

---

#### 7. 앱 내 결제 (추후 검토)

- [ ] 소비자가 앱에서 결제
- [ ] 업체에 정산

---

## 기술 부채 관리

### 리팩토링 우선순위

#### High Priority
- [ ] 동시성 제어 개선 (예약 생성)
- [ ] 에러 처리 표준화
- [ ] API 응답 캐싱 전략

#### Medium Priority
- [ ] 코드 스플리팅
- [ ] 이미지 최적화 자동화
- [ ] 테스트 코드 커버리지 80% 달성

#### Low Priority
- [ ] 컴포넌트 라이브러리 통일
- [ ] CSS-in-JS 표준화

---

## 일정 및 마일스톤

### MVP (Phase 1)

| 주차 | 작업 | 담당 |
|------|------|------|
| 1주 | 프로젝트 초기 설정 + 인증 시스템 | - |
| 2주 | 소비자 - 업체 탐색 | - |
| 3-4주 | 소비자 - 예약 시스템 | - |
| 5주 | 소비자 - 리뷰 시스템 | - |
| 6-7주 | 업체 - 상품 관리 + 캐시 관리 | - |
| 8주 | 공통 - 마이페이지 + 알림 | - |
| 9주 | 통합 테스트 + 버그 수정 | - |
| 10주 | 앱 스토어 제출 준비 | - |

### Phase 2 (4-6주)

| 주차 | 작업 |
|------|------|
| 1-2주 | 지도 + 소셜 로그인 |
| 3주 | 알림 구독 + 검색 |
| 4주 | 카카오톡 알림 + 리뷰 개선 |
| 5-6주 | 대시보드 개선 + 테스트 |

### Phase 3 (6-8주)

| 주차 | 작업 |
|------|------|
| 1-2주 | 운영자 대시보드 |
| 3-4주 | 실시간 채팅 |
| 5주 | 쿠폰/프로모션 |
| 6주 | 네이버/카카오 지도 |
| 7-8주 | 다크 모드 + 다국어 + 테스트 |

---

## 출시 체크리스트

### 앱 스토어 제출 전

- [ ] 모든 기능 테스트 완료
- [ ] 크래시 없음 (Sentry 모니터링)
- [ ] 성능 최적화 (로딩 시간 < 3초)
- [ ] 개인정보 처리방침 작성
- [ ] 이용약관 작성
- [ ] 앱 아이콘, 스플래시 화면
- [ ] 스크린샷 (Apple/Google)
- [ ] 앱 설명 작성

### 인프라

- [ ] Supabase 프로덕션 플랜 전환
- [ ] 토스 페이먼츠 실제 키 적용
- [ ] Sentry 프로덕션 설정
- [ ] 백업 전략 수립

---

## 성공 지표 (KPI)

### MVP 출시 후 1개월

- [ ] DAU (일간 활성 사용자): 100명
- [ ] 회원가입 전환율: 30%
- [ ] 예약 완료율: 70%
- [ ] 평균 평점: 4.0 이상
- [ ] 크래시 비율: < 1%

### 3개월 후

- [ ] MAU (월간 활성 사용자): 1,000명
- [ ] 업체 수: 50개
- [ ] 일 평균 예약: 50건
- [ ] 리뷰 작성률: 30%

---

## 다음 단계

- [ ] 프로젝트 초기 설정 가이드 작성
- [ ] Expo 프로젝트 생성
- [ ] Supabase 프로젝트 생성
- [ ] 개발 시작!

---

**문서 작성**: Claude Code
**최종 검토**: 2026-01-10
